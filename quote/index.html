<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Random Quote Generator</title>
        <script async src="https://kit.fontawesome.com/2f69883659.js" crossorigin="anonymous"></script>
        <meta name="theme-color" id="metacl" content="#000000" />

        <style>
            @import url('https://fonts.googleapis.com/css2?family=Libre+Caslon+Text:ital,wght@0,400;0,700;1,400&display=swap');

            body,
            html {
                margin: 0;
                padding: 0;
                height: 100%;
            }

            * {
                box-sizing: border-box;
                font-family: "Libre Caslon Text", serif;

            }

            .container {
                max-width: 400px;
                height: 100dvh;
                margin: 0 auto;
                position: relative;
                display: flex;
                flex-direction: column;
            }

            #fullscreenDiv {
                max-width: 100%;
                height: 100%;
                display: flex;
                flex-direction: column;
                background-color: transparent;
                justify-content: space-between;
                align-items: center;
                padding: 25px;

            }


            #shareButton {
                font-size: 16px;
                width: 96%;
                bottom: 15px;
                left: 0;
                right: 0;
                margin: 0 auto;
                /* opacity: 0; */
                padding-block: 20px;
                position: absolute;
                background-color: #000;
                color: #fff;
                border-radius: 31px;
                border: none;
            }

            .ad {
                background-color: #ffffff30;
                width: 100%;
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 25px;
            }

            .quotebox {
                /* box-shadow: 0 0 20px #1a1a1a62; */
                width: 100%;
                font-size: 1.8em;
                min-height: 50%;
                margin-top: 50px;
                padding: 20px;
                height: fit-content;
                background-color: #ffffff90;
                border-radius: 31px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: space-between;
            }

            #author {
                color: #4e4e4e;
                font-size: 20px;
                margin-top: 10px;
                align-self: flex-end;
            }

            .rdm {
                position: absolute;
                width: 80px;
                border-radius: 40px;
                border: none;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: #fff;
                box-shadow: 0 0 20px #1a1a1a25;
                font-size: 2.3em;
                margin: 0 auto;
                left: 0;
                right: 0;
                bottom: 110px;
                height: 80px;
            }

            .rdm svg {
                rotate: 15deg;
            }
        </style>
    </head>

    <body>

        <div class="container">
            <div id="fullscreenDiv">
                <div class="quotebox" id="rxd">
                    <div id="quote">

                    </div>
                    <div id="author">

                    </div>
                </div>
                <div class="ad">
                    rith1x.github.io/quote
                </div>
            </div>
            <button class="rdm" onclick="fetchRandomQuote()"><i class="fa-solid fa-dice-five"></i></button>
            <button id="shareButton" onclick="copyboard()">Share Quote</button>
        </div>


        <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
        <script>
            const elementToSave = document.getElementById("fullscreenDiv");
            function copyboard() {
                html2canvas(elementToSave, {
                    width: elementToSave.scrollWidth - 1,
                    height: elementToSave.scrollHeight - 1
                }).then(canvas => {
                    var dataUrl = canvas.toDataURL("image/jpeg");
                    const a = document.createElement('a');
                    a.href = dataUrl;
                    a.download = 'quote.png';

                    a.click();
                });

            }
            const meta = document.getElementById("metacl");
            // Function to fetch a random quote
            function fetchRandomQuote() {
                // Endpoint URL
                const apiUrl = 'https://api.quotable.io/quotes/random';

                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        const quoteText = data[0].content;
                        const quoteAuthor = data[0].author;
                        var genClr = getRandomHexColor();
                        document.body.style.backgroundColor = genClr;
                        document.getElementById("fullscreenDiv").style.backgroundColor = genClr;
                        document.getElementById("fullscreenDiv").style.borderColor = genClr;
                        meta.content = genClr;
                        document.getElementById("quote").innerText = quoteText;
                        document.getElementById("author").innerText = quoteAuthor;
                        console.log(`"${quoteText}" - ${quoteAuthor}`);
                    })
                    .catch(error => {
                        console.error('Error fetching quote:', error);
                    });

            }
            fetchRandomQuote()

            function getRandomHexColor() {
                // Generate a random hexadecimal color code
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }

        </script>

    </body>

</html>