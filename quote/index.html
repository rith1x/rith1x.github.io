<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Random Quote Generator</title>
        <script async src="https://kit.fontawesome.com/2f69883659.js" crossorigin="anonymous"></script>
        <meta name="theme-color" id="metacl" content="#000000" />

        <style>
            @import url('https://fonts.googleapis.com/css2?family=Cedarville+Cursive&family=DM+Serif+Display:ital@0;1&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Libre+Caslon+Text:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap');

            body,
            html {
                margin: 0;
                padding: 0;
                height: 100%;
                font-family: "Libre Caslon Text", serif;

            }

            * {
                box-sizing: border-box;

            }

            .container {
                max-width: 400px;
                height: 100dvh;
                margin: 0 auto;
                position: relative;
                display: flex;
                flex-direction: column;
            }

            #fullscreenDiv {
                max-width: 100%;
                height: 100%;
                display: flex;
                flex-direction: column;
                background-color: transparent;
                justify-content: space-between;
                align-items: center;
                padding: 25px;

            }


            #shareButton {
                font-size: 16px;
                width: 96%;
                bottom: 15px;
                left: 0;
                right: 0;
                margin: 0 auto;
                font-family: "Libre Caslon Text", serif;

                /* opacity: 0; */
                padding-block: 20px;
                position: absolute;
                background-color: #000;
                color: #fff;
                border-radius: 31px;
                border: none;
            }

            .ad {
                background-color: #ffffff30;
                width: 100%;
                height: 50px;
                display: flex;
                font-family: "Libre Caslon Text", serif;

                align-items: center;
                justify-content: center;
                border-radius: 25px;
            }

            .quotebox {
                /* box-shadow: 0 0 20px #1a1a1a62; */
                width: 100%;
                font-size: 1.8em;
                min-height: 50%;
                margin-top: 50px;
                padding: 20px;
                height: fit-content;
                background-color: #ffffff90;
                border-radius: 31px;
                display: flex;
                flex-direction: column;
                align-items: center;
                transition: all .3s ease-in-out;
                justify-content: space-between;
            }

            #author {
                color: #4e4e4e;
                font-size: 20px;
                margin-top: 10px;
                align-self: flex-end;
            }



            .rdm {
                position: absolute;
                width: 240px;
                border-radius: 40px;
                border: none;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: #fff;
                box-shadow: 0 0 20px #1a1a1a25;
                font-size: 2.3em;
                margin: 0 auto;
                left: 0;
                transition: all .3s ease-in-out;
                right: 0;
                bottom: 110px;
                height: 60px;
            }

            .rdm button {
                border: none;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: transparent;
                margin: 0 auto;
                left: 0;
                right: 0;
                font-size: .7em;
                width: 100%;
                height: 100%;
                border-radius: 50%;
                bottom: 110px;
            }

            .rdm button:nth-child(odd) svg {
                rotate: 15deg;
            }
        </style>
    </head>

    <body>

        <div class="container">
            <div id="fullscreenDiv">
                <div class="quotebox" id="rxd">
                    <div id="quote">

                    </div>
                    <div id="author">

                    </div>
                </div>
                <div class="ad">
                    rith1x.github.io/quote
                </div>
            </div>
            <div class="rdm">
                <button onclick="changeFont()"><i class="fa-solid fa-font"></i></button>
                <button onclick="changeLook()"><i class="fa-solid fa-wand-magic-sparkles"></i></button>
                <button onclick="fetchRandomQuote()"><i class="fa-solid fa-dice-five"></i></button>
                <button onclick="changeColor()"><i class="fa-solid fa-palette"></i></button>
            </div>
            <button id="shareButton" onclick="copyboard()">Share Quote</button>
        </div>


        <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
        <script>
            const elementToSave = document.getElementById("fullscreenDiv");
            function copyboard() {
                html2canvas(elementToSave, {
                    scale: 5,
                    width: elementToSave.scrollWidth - 1,
                    height: elementToSave.scrollHeight - 1
                }).then(canvas => {
                    var dataUrl = canvas.toDataURL("image/jpeg");
                    const a = document.createElement('a');
                    a.href = dataUrl;
                    a.download = 'quote.png';

                    a.click();
                });

            }
            const meta = document.getElementById("metacl");
            function fetchRandomQuote() {
                const apiUrl = 'https://api.quotable.io/quotes/random?minLength=20&maxLength=140';
                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        const quoteText = data[0].content;
                        const quoteAuthor = data[0].author;
                        document.getElementById("quote").innerText = quoteText;
                        document.getElementById("author").innerText = quoteAuthor;
                    })
                    .catch(error => {
                        console.error('Error fetching quote:', error);
                    });
            }
            fetchRandomQuote()
            function getRandomHexColor() {
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }
            function changeColor() {
                var genClr = getRandomHexColor();
                document.body.style.backgroundColor = genClr;
                document.getElementById("fullscreenDiv").style.backgroundColor = genClr;
                document.getElementById("fullscreenDiv").style.borderColor = genClr;
                meta.content = genClr;
            }
            changeColor();
            let i = 0;
            function changeLook() {
                const styles = ["rotate(0deg)", "rotate(-5deg)", "rotate(5deg)"];
                i += 1
                if (i >= styles.length) {
                    i = 0
                }
                document.getElementById("rxd").style.transform = styles[i];

            }
            let f = -1;
            function changeFont() {
                const fonts = ["Libre Caslon Text", "Playfair Display", "EB Garamond", "DM Serif Display", "Cedarville Cursive"]
                f += 1;
                if (f >= fonts.length) {
                    f = 0
                }
                document.getElementById("rxd").style.fontFamily = fonts[f];

            }
            changeFont()

        </script>

    </body>

</html>