<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Random Quote Generator</title>
        <script async src="https://kit.fontawesome.com/2f69883659.js" crossorigin="anonymous"></script>
        <meta name="theme-color" id="metacl" content="#000000" />
        <link
            href="https://api.fontshare.com/v2/css?f[]=clash-display@400&f[]=zodiak@400&f[]=sentient@400&f[]=boska@400&f[]=bonny@400&f[]=bebas-neue@400&display=swap"
            rel="stylesheet">
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Cedarville+Cursive&family=DM+Serif+Display:ital@0;1&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Libre+Caslon+Text:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap');
            @import url('https://fonts.googleapis.com/css2?family=Baskervville+SC&display=swap');
            @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');

            body,
            html {
                margin: 0;
                padding: 0;
                height: 100%;
                font-family: "Libre Caslon Text", serif;

            }

            * {
                box-sizing: border-box;

            }

            .container {
                max-width: 400px;
                height: 100dvh;
                margin: 0 auto;
                position: relative;
                display: flex;
                flex-direction: column;
            }

            #fullscreenDiv {
                max-width: 100%;
                height: 100%;
                display: flex;
                flex-direction: column;
                background-color: transparent;
                justify-content: space-between;
                align-items: center;
                padding: 25px;

            }


            #shareButton {
                font-size: 16px;
                width: 96%;
                bottom: 15px;
                left: 0;
                right: 0;
                margin: 0 auto;
                font-family: "Libre Caslon Text", serif;

                /* opacity: 0; */
                padding-block: 20px;
                position: absolute;
                background-color: #000;
                color: #fff;
                border-radius: 31px;
                border: none;
            }

            .ad {
                background-color: #ffffff30;
                width: 100%;
                height: 50px;
                display: flex;
                font-family: "Libre Caslon Text", serif;

                align-items: center;
                justify-content: center;
                border-radius: 25px;
            }

            .quotebox {
                /* box-shadow: 0 0 20px #1a1a1a62; */
                width: 100%;
                font-size: 1.8em;
                min-height: 50%;
                margin-top: 50px;
                padding: 20px;
                height: fit-content;
                background-color: #ffffff90;
                border-radius: 30px;
                display: flex;
                flex-direction: column;
                align-items: center;
                transition: all .3s ease-in-out;
                justify-content: space-between;
            }

            #author {
                color: #161616;
                font-size: 17px;
                margin-top: 10px;
                align-self: flex-end;
            }



            .rdm {
                position: absolute;
                width: fit-content;
                border-radius: 40px;
                border: none;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: #ffffff80;
                box-shadow: 0 0 20px #1a1a1a25;
                font-size: 2.3em;
                margin: 0 auto;
                left: 0;
                transition: all .3s ease-in-out;
                right: 0;
                bottom: 110px;
                height: 40px;

                overflow: hidden;

            }

            .rdm button {
                border: none;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: transparent;
                margin: 0 auto;
                left: 0;
                right: 0;
                font-size: .5em;
                /* width: 100%; */
                aspect-ratio: 1 / 1;
                height: 100%;
                border-radius: 50%;
                bottom: 110px;
            }





            #popp {
                border: none;
                max-width: 400px;
                min-width: 250px;
                position: absolute;
                inset: 0;
                height: fit-content;
                width: 80%;
                margin: auto;
                background-color: #fff;
                padding: 15px;
                display: flex;
                visibility: hidden;
                overflow: hidden;
                align-items: center;
                justify-content: space-between;
                flex-direction: column;
                border-radius: 21px;
                gap: 15px;
            }

            #popp .header {
                display: flex;
                width: 100%;
                align-items: center;
                justify-content: space-between;
                height: 30px;

            }

            .header button {
                border: none;
                height: 100%;
                aspect-ratio: 1 / 1;
                font-size: 1.2em;
                display: flex;
                align-items: center;
                justify-content: center;
                color: rgb(202, 0, 0);
                background-color: transparent;
            }

            .contents {
                width: 100%;

            }

            .contents .field {
                width: 100%;
                position: relative;

            }

            select {
                width: 100%;
                padding-inline: 5px;
                font-family: inherit;
                height: 40px;
                border-radius: 6px;
            }


            select:focus {
                outline: none;
                border-color: #00ab47;
            }

            .field:focus-within label {
                color: #00ab47;
            }

            .field label {
                position: absolute;
                font-size: 12px;
                background-color: #fff;
                left: 8px;
                padding-inline: 3px;
                top: -7px;
                color: #4e4e4e;
            }

            .lan {
                font-size: 10px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                color: #4e4e4e;
                margin-top: 10px;

            }

            .lanx {
                font-size: 10px;
                display: flex;
                align-items: center;
                justify-content: start;
                color: #4e4e4e;
                gap: 2px;
                margin-top: 10px;

            }

            .lanx a {
                text-decoration: none;
                background-color: #f5d5ff;
                padding: 2px 2px;
                border-radius: 4px;
                color: #7f00a6;
            }

            .qtes {
                width: 100%;
                display: flex;
                padding-block: 10px;
            }

            .topquote {
                justify-content: flex-start;
            }

            .btmquote {
                justify-content: flex-end;
            }
        </style>
    </head>

    <body>

        <div class="container">
            <div id="fullscreenDiv">
                <div class="quotebox" id="rxd">
                    <div class="topquote qtes" tag-2 style="display: none;">
                        <i class="fa-solid fa-quote-left"></i>
                    </div>
                    <div id="quote">

                    </div>
                    <div id="author">

                    </div>
                    <div class="btmquote qtes" tag-1 style="display: none;">
                        <i class="fa-solid fa-quote-right"></i>
                    </div>

                </div>
                <div class="ad" id="ad">
                    rith1x.github.io/quote
                </div>
            </div>
            <div id="popp" close>
                <div class="header">
                    <h4>Settings</h4>
                    <button onclick="poppclose()"><i class="fa-solid fa-xmark"></i></button>

                </div>
                <div class="contents">
                    <div class="field">
                        <label for="categories">Category:</label>
                        <select name="" id="categories" oninput="changeGenre()"></select>
                    </div>
                    <div class="lanx">
                        Designed and Developed by <a target="_blank"
                            href="https://linkedin.com/in/kiruthikkumar">Kiruthik
                            Kumar</a>
                    </div>
                    <div class="lan">
                        <span>
                            API by quotable
                        </span><span>
                            Version 1.0.3
                        </span>
                    </div>

                </div>

            </div>
            <div class="rdm">
                <button onclick="changeFont()"><i class="fa-solid fa-font"></i></button>
                <button onclick="changeBold()"><i class="fa-solid fa-bold"></i></button>
                <button onclick="changeItallic()"><i class="fa-solid fa-italic"></i></button>
                <button onclick="fetchRandomQuote()"><i class="fa-solid fa-dice-five"></i></button>
                <button onclick="changeLook()"><i class="fa-solid fa-wand-magic-sparkles"></i></button>
                <button onclick="poppshow()"><i class="fa-solid fa-sliders"></i></button>
                <button onclick="changeColor()"><i class="fa-solid fa-palette"></i></button>
                <button onclick="changeModel()"><i class="fa-solid fa-quote-left"></i></button>
                <button onclick="putBorder()"><i class="fa-solid fa-border-top-left"></i></button>
            </div>
            <button id="shareButton" onclick="copyboard()">Share Quote</button>
        </div>


        <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
        <script>
            let currentColor;
            let view = 0;
            function changeModel() {
                if (view == 0) {
                    const elementToSave = document.getElementById("fullscreenDiv");
                    const ad = document.getElementById("ad");
                    ad.style.visibility = "hidden";
                    elementToSave.style.height = "fit-content";

                    elementToSave.style.justifyContent = "center";
                    document.getElementById("rxd").style.margin = "none";
                    document.getElementById("rxd").style.background = "none";
                    document.querySelector('[tag-1]').style.display = "flex";
                    document.querySelector('[tag-2]').style.display = "flex";
                    let meg = currentColor.split("#");
                    console.log(meg[1])
                    document.getElementById("rxd").style.color = getTextColor(meg[1]);
                    document.getElementById("author").style.color = getTextColor(meg[1]);

                    view = 1;
                } else {
                    const elementoSave = document.getElementById("fullscreenDiv");

                    elementoSave.style.height = "100dvh";
                    const ad = document.getElementById("ad");
                    ad.style.visibility = "visible";
                    const elementToSave = document.getElementById("fullscreenDiv");
                    elementToSave.style.justifyContent = "space-between";
                    document.getElementById("rxd").style.marginTop = "50px";
                    document.getElementById("rxd").style.background = "";
                    document.querySelector('[tag-1]').style.display = "none";
                    document.querySelector('[tag-2]').style.display = "none";
                    document.getElementById("rxd").style.color = "#000";
                    view = 0;
                }
            }
            function getTextColor(hexColor) {
                let r = parseInt(hexColor.substring(0, 2), 16);
                let g = parseInt(hexColor.substring(2, 4), 16);
                let b = parseInt(hexColor.substring(4, 6), 16);
                let luminance = (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;
                return luminance > 0.5 ? '#000000' : '#ffffff';
            }

            const elementToSave = document.getElementById("fullscreenDiv");
            function copyboard() {
                html2canvas(elementToSave, {
                    scale: 5,
                    width: elementToSave.scrollWidth - 1,
                    height: elementToSave.scrollHeight - 1
                }).then(canvas => {
                    var dataUrl = canvas.toDataURL("image/jpeg");
                    const a = document.createElement('a');
                    a.href = dataUrl;
                    a.download = 'quote.png';

                    a.click();
                });

            }

            function poppshow() {
                document.getElementById("popp").style.visibility = "visible"

            }
            function poppclose() {

                document.getElementById("popp").style.visibility = "hidden"
            }

            let custom = "?minLength=20&maxLength=130"
            // let heroku = 'https://cors-anywhere.herokuapp.com/'
            let heroku = 'https://thingproxy.freeboard.io/fetch/'
            let apiUrl = 'https://express-api-hn8u.onrender.com/quote/random';
            const meta = document.getElementById("metacl");
            function fetchRandomQuote() {
                console.log(apiUrl)
                // fetch(heroku + apiUrl)
                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        const quoteText = data[0].quote;
                        const quoteAuthor = data[0].author;
                        document.getElementById("quote").innerText = quoteText;
                        document.getElementById("author").innerText = quoteAuthor;

                        let heighx = document.getElementById('quote').offsetHeight;
                        if (heighx >= 300) {
                            document.getElementById('quote').style.fontSize = "0.89em"
                        } else {
                            document.getElementById('quote').style.fontSize = "1em"

                        }
                    })
                    .catch(error => {
                        console.error('Error fetching quote:', error);
                    });
            }
            function changeGenre() {
                let genrex = document.getElementById("categories").value;
                if (genrex != "random") {
                    custom = `?tags=${genrex}`
                    fetchRandomQuote();
                } else {
                    custom = '';
                }
            }
            fetchRandomQuote()
            function getRandomHexColor() {
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }
            function changeColor() {
                var genClr = getRandomHexColor();
                currentColor = genClr;
                document.body.style.backgroundColor = genClr;
                document.getElementById("fullscreenDiv").style.backgroundColor = genClr;
                document.getElementById("fullscreenDiv").style.borderColor = genClr;
                meta.content = genClr;
                if (view == 1) {
                    let meg = currentColor.split("#");
                    console.log(meg[1])
                    document.getElementById("rxd").style.color = getTextColor(meg[1]);
                    document.getElementById("author").style.color = getTextColor(meg[1]);


                } else {
                    document.getElementById("author").style.color = "#000";

                    document.getElementById("rxd").style.color = "#000";



                }
            }
            changeColor();
            let i = 0;
            function changeLook() {
                const styles = ["rotate(0deg)", "rotate(-5deg)", "rotate(5deg)"];
                i += 1
                if (i >= styles.length) {
                    i = 0
                }
                document.getElementById("rxd").style.transform = styles[i];

            }
            let f = -1;
            function changeFont() {
                const fonts = ["Libre Caslon Text", "Playfair Display", "EB Garamond", "DM Serif Display", "Cedarville Cursive", 'Clash Display', 'Zodiak', 'Sentient', 'Boska', 'Bonny', 'Bebas Neue', 'Baskervville SC', 'Pacifico']



                f += 1;
                if (f >= fonts.length) {
                    f = 0
                }
                document.getElementById("rxd").style.fontFamily = fonts[f];

            }
            changeFont()


            function fetchCategory() {
                const apiUrl = 'https://api.quotable.io/tags';

                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        const selectElement = document.getElementById("categories");
                        const rdm = document.createElement('option');
                        rdm.innerText = "Random"
                        rdm.value = "random"
                        rdm.selected = "true"
                        selectElement.appendChild(rdm);



                        data.forEach(item => {
                            const optionElement = document.createElement("option");
                            optionElement.value = item.slug;
                            optionElement.innerText = `${item.slug.charAt(0).toUpperCase() + item.slug.slice(1)} (${item.quoteCount})`;
                            selectElement.appendChild(optionElement);
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching data:', error);
                    });

            }
            // fetchCategory();
            let ital = 0
            function changeItallic() {
                if (ital == 0) {
                    document.getElementById("quote").style.fontStyle = 'italic'
                    document.getElementById("author").style.fontStyle = 'italic'

                    ital = 1
                } else {
                    document.getElementById("quote").style.fontStyle = 'normal'
                    document.getElementById("author").style.fontStyle = 'normal'


                    ital = 0
                }
            }
            let bold = 0;
            function changeBold() {
                if (bold == 0) {
                    document.getElementById("quote").style.fontWeight = 'bolder'
                    bold = 1
                } else {
                    document.getElementById("quote").style.fontWeight = 'normal'

                    bold = 0
                }
            }
            let bi = 0;
            function putBorder() {
                const borders = ['none', 'solid 1px', 'solid 2px', 'solid 3px']
                const qteel = document.getElementById("rxd");
                console.log(borders[bi])
                qteel.style.border = borders[bi];
                bi += 1;
                if (bi >= borders.length) {
                    bi = 0
                }
            }

        </script>

    </body>

</html>